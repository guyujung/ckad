# POD



## apiVersion 주의
POD v1

Service v1

ReplicaSet apps/v1

Deployment apps/v1


```
apiVersion: v1
kind: Pod
metadata:
  name: myapp-pod
  type: front-end
spec:
  containers:
    - name: nginx-container
      image: nginx
```
###  pod yaml파일로 생성
`kubectl create -f pod-definition.yml`

### pod 빠르게 생성
`kubectl run nginx --image nginx`

--dry-run=client: 리소스를 실제로 생성하지 않고 클라이언트 측에서만 실행합니다.

-o yaml: 명령어의 출력을 YAML 형식으로 변환합니다.

> redis.yaml: 출력된 YAML 정의를 redis.yaml 파일로 저장합니다.

`kubectl run redis --image=redis123 --dry-run=client -o yaml`
`kubectl run redis --image=redis123 --dry-run=client -o yaml>redis.yaml`

### 파드 yaml 파일 보기
`cat pod-definition.yml`

### pod 상세 정보 보기
`kubectl describe pod [podname]`

`kubectl get pods`

`kubectl get pod <pod-name> -o yaml > pod-definition.yaml`
### pod 삭제하기
`kubectl delete pod webapp`


### pod 편집하고 적용하기
`kubectl get pod redis -o yaml > redis-definition.yaml`

`kubectl edit pod redis`

`kubectl apply -f redis-definition.yaml `

# ReplicaSet

## RepricaSet Controller
```
apiVersion: v1
kind: ReplicationController
metadata:
  name: myapp-rc
  labels:
    app: myapp
    type: front-end
spec:
  template:
    metadata:
      name: myapp-pod
      labels:
        app: redis
        typeL frontend
    spec:
      containers:
      - name: nginx-container
        image: nginx
  replicas: 3
```
## ReplicaSet

```

apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: myapp-replicaset
  labels:
    app: myapp
    type: front-end
spec:
  template:
    metadata:
      name: myapp-pod
      labels:
        app: redis
        typeL frontend
    spec:
      containers:
      - name: nginx-container
        image: nginx
  replicas: 3
  selector:
    matchLabels:
      type: front-end
```
ReplicationController와 ReplicaSet은 쿠버네티스에서 파드의 복제와 관리를 담당하는 리소스입니다.
ReplicationController는 초기 쿠버네티스 버전에서 사용되었으며, 현재는 점차 ReplicaSet으로 대체되고 있습니다. ReplicaSet은 matchLabels와 같은 고급 레이블 셀렉터를 사용하여 파드를 선택할 수 있습니다.


replicaSet리소스를 생성하기전 같은 label의 pod가 이미 생성되어 있는 경우 template 섹션을 정의 해줘야 할까?
무조건 해줘야 합니다.  pod를 생성하는데 사용되진 않아도 추후 pod에 문제가 생겼을때 정보가 필요하기 때문입니다.

`kubectl create -f replicaset-definition.yml`

`kubectl get replicaset`

`kubectl delete replicaset myapp-replicaset `

`kubectl replace -f replicaset-definition.yaml`

`kubectl scale --replicas=6 -f replicaset-definition.yaml`

`kubectl scale --replicas=6 -f replicaset myapp-replicaset`



