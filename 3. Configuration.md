# Commands and Arguments 

```
apiVersion: v1
kind: Pod
metadata:
  name: ubuntu-sleeper-pod
spec:
  containers:
    - name: ubuntu-sleeper-pod
      image: ubuntu-sleeper-pod
      command: ["sleep2.0"]
      args: ["10"]
```

`docker run --name ubuntu-sleeper ubuntu-sleeper 10`

`docker run --name ubuntu-sleeper --entrypoint sleep2.0 ubuntu-sleeper 10`

docker 명령에 추가 된 것은 args에 배열 형태로 추가됩니다.
command, args와 같은 명령은 docker file의 명령을 무효화시킬 수 있습니다.



5000초를 sleep하는 두 가지 방법

```
apiVersion: v1
kind: Pod
metadata:
  name: ubuntu-sleeper-pod
spec:
  containers:
    - name: ubuntu-sleeper-pod
      image: ubuntu-sleeper-pod
      command: ["sleep"]
      args: ["5000"]
```


```
apiVersion: v1
kind: Pod
metadata:
  name: ubuntu-sleeper-pod
spec:
  containers:
    - name: ubuntu-sleeper-pod
      image: ubuntu-sleeper-pod
      command: ["sleep", "5000"]
```

-- 뒤에는 쿠버네티스 명령어 해석을 중단하고 컨테이너로 매개변수를 전달합니다.

`kubectl run webapp --image=kouodekloud -- --color green `


## format을 통해 환경 설정 직접적으로 방법

```
apiVersion: v1
kind: Pod
metadata:
  name: simple-webapp-color
spec:
  containers:
    - name: simple-webapp-color
      image: simple-webapp-color
      ports:
        - containerPort: 8080
      env:
        - name: APP_COLOR
          value: pink
```

`docker run -e APP_COLOR=pink simple-webapp-color`

## secret과 configMap을 통해 환경 설정하는 방법

pod가 많아질수록 환경 구성 관리하기 힘들어집니다. 그렇기 때문에 secret과 configMap을 사용해서 환경설정을 중앙에서 관리합니다.

[문자로 환경 키 값 전달]
`kubectl create configmap app-config --from-literal=APP_COLOR=blue --from-literal=APP_MOD=prod`

[파일로 환결 키 값 전달]
`kubectl create configmap app-config --from-file=app_config.properties`

[선언적인 방법으로 환경 키 값 전달]

```
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  APP_COLOR: blue
  APP_MODE: prod
```

[env]

```
apiVersion: v1
kind: Pod
metadata:
  name: simple-webapp-color
spec:
  containers:
    - name: simple-webapp-color
      image: simple-webapp-color
      ports:
        - containerPort: 8080
      envFrom:
        - configMapRef:
          name: app-config
```

[single env]

```
apiVersion: v1
kind: Pod
metadata:
  name: simple-webapp-color
spec:
  containers:
    - name: simple-webapp-color
      image: simple-webapp-color
      ports:
        - containerPort: 8080
      env:
        - name: APP_COLOR
          valueFrom:
            configMapKeyRef:
              name: app-config
              key: APP_COLOR
```

 [volume]

 ```
apiVersion: v1
kind: Pod
metadata:
  name: simple-webapp-color
spec:
  containers:
    - name: simple-webapp-color
      image: simple-webapp-color
      ports:
        - containerPort: 8080
      volumes:
      - name: app-config-volume
        configMap:
          name: app-config
```


# Secret

[Imperative]
kubectl create secret generic app-secret --from-literal=DB_Host=mysql --from-literal=DB_User=root

[declarative]

 ```
apiVersion: v1
kind: Secret
metadata:
  name: app-secret
data:
  DB_Host: mysql
  DB_User: root
  DB_Password: paswrd
```

 ```
apiVersion: v1
kind: Pod
metadata:
  name: simple-webapp-color
spec:
  containers:
    - name: simple-webapp-color
      image: simple-webapp-color
      ports:
        - containerPort: 8080
      envFrom:
        - secretRef:
            name: app-secret
```

secret 정보들은 보통 base4로 인코딩해서 값을 적습니다.

`echo -n 'mysql' | base64`

디코딩

`echo -n 'bXlzcWw=' | base64 --decode` 
